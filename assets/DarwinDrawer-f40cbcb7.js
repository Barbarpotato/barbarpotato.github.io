import{q as H,N as I,y as s,h,C as R,D as k,A as P,z as N,v as A,E as g,X as C}from"./index-58732818.js";import{M as B,g as S,w as v,T as j,u as F,a as L,b as z,c as W,d as Y,H as V,e as q,B as E,f as b,h as G,I as J,i as K}from"./Main-9bb078db.js";import{M as X}from"./modal-close-button-d75cc8c6.js";const[$,Q]=H(),U={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function Z(r,t){var e;if(r)return((e=U[r])==null?void 0:e[t])??r}function ee(r){var d;const{isOpen:t,onClose:e,placement:o="right",children:n,...i}=r,l=I(),c=(d=l.components)==null?void 0:d.Drawer,u=Z(o,l.direction);return s($,{value:{placement:u},children:s(B,{isOpen:t,onClose:e,styleConfig:c,...i,children:n})})}const M={exit:{duration:.15,ease:j.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},te={exit:({direction:r,transition:t,transitionEnd:e,delay:o})=>{const{exit:n}=S({direction:r});return{...n,transition:(t==null?void 0:t.exit)??v.exit(M.exit,o),transitionEnd:e==null?void 0:e.exit}},enter:({direction:r,transitionEnd:t,transition:e,delay:o})=>{const{enter:n}=S({direction:r});return{...n,transition:(e==null?void 0:e.enter)??v.enter(M.enter,o),transitionEnd:t==null?void 0:t.enter}}},O=h.forwardRef(function(t,e){const{direction:o="right",style:n,unmountOnExit:i,in:l,className:c,transition:u,transitionEnd:d,delay:a,motionProps:p,animatePresenceProps:m,...f}=t,y=S({direction:o}),x=Object.assign({position:"fixed"},y.position,n),w=i?l&&i:!0,_=l||i?"enter":"exit",D={transitionEnd:d,transition:u,direction:o,delay:a};return s(R,{...m,custom:D,children:w&&s(k.div,{...f,ref:e,initial:"exit",className:P("chakra-slide",c),animate:_,exit:"exit",custom:D,variants:te,style:x,...p})})});O.displayName="Slide";const se=N(O),T=A((r,t)=>{const{className:e,children:o,motionProps:n,containerProps:i,...l}=r,{getDialogProps:c,getDialogContainerProps:u,isOpen:d}=F(),a=c(l,t),p=u(i),m=P("chakra-modal__content",e),f=L(),y={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...f.dialog},x={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...f.dialogContainer},{placement:w}=Q();return s(z,{children:s(N.div,{...p,className:"chakra-modal__content-container",__css:x,children:s(se,{motionProps:n,direction:w,in:d,className:m,...a,__css:y,children:o})})})});T.displayName="DrawerContent";const oe=async(r="",t=[])=>{try{const e=t.map(i=>({...i,message:void 0}));return await(await fetch("https://darwin-assistant.vercel.app/api/v1/conversation/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:e,message:r})})).json()}catch{return{status:"failed",response:"OopsðŸ˜Ÿ! Darwin is currently busy, please try again later."}}};function ie({isOpen:r,onClose:t,btnRef:e}){const[o,n]=h.useState(""),[i,l]=h.useState([]),[c,u]=h.useState(!1);h.useEffect(()=>{l([{role:"user",parts:[{text:""}],message:""},{role:"model",parts:[{text:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}],message:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}]),n("")},[]);const d=async()=>{if(!o.trim()||c)return;u(!0),l(p=>[...p,{role:"user",parts:[{text:o}],message:o},{role:"model",parts:[{text:"Thinking..."}],message:"Typing..."}]),n("");const a=await oe(o,i);l(p=>{const m=[...p];return m[m.length-1]={role:"model",parts:[{text:a.response}],message:a.response},m}),u(!1)};return g(ee,{blockScrollOnMount:!1,size:"lg",isOpen:r,placement:"right",onClose:t,finalFocusRef:e,children:[s(W,{}),g(T,{children:[s(X,{}),s(Y,{children:s(V,{color:"#ff79c6",size:"md",children:"Conversation With Darwin"})}),s(q,{children:i.map((a,p)=>a.message?s(C,{direction:"column",align:a.role==="model"?"flex-start":"flex-end",children:g(E,{mb:4,p:3,borderRadius:"md",bg:a.role==="model"?"#2D3748":"#4A5568",color:"white",width:"85%",transition:"all 0.2s ease-in-out",_hover:{bg:a.role==="model"?"#394150":"#5A6478",transform:"scale(1.02)",boxShadow:"md"},children:[s(b,{fontWeight:"bold",color:"#ff79c6",children:a.role==="model"?"Darwin":"You"}),s(b,{mt:1,children:a.message})]})},p):null)}),g(G,{children:[s(C,{width:"100%",children:s(J,{value:o,onKeyDown:a=>{a.key==="Enter"&&!c&&d()},onChange:a=>n(a.target.value),borderLeftRadius:"2xl",borderRightRadius:0,borderWidth:3,borderColor:"#536189",focusBorderColor:"#ff79c6",my:2,placeholder:"Send a message...",isDisabled:c})}),s(K,{borderLeftRadius:0,colorScheme:"purple",my:2,onClick:d,isDisabled:c,isLoading:c,loadingText:"Sending...",children:"Send"})]})]})]})}export{ie as default};
