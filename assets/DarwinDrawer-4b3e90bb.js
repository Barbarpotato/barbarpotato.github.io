import{v as P,A as D,y as o,a2 as B,q as R,N as j,h,C as F,D as L,z as _,E as g,X as b}from"./index-a39b1731.js";import{u as O,a as T,c as z,M as W,g as S,w as v,T as Y,b as V,d as q,e as E,H as G,f as J,B as K,h as N,i as X,I as $,j as Q}from"./Main-b25e0ecd.js";const k=P((a,t)=>{const{onClick:e,className:s,...r}=a,{onClose:l}=O(),i=D("chakra-modal__close-btn",s),c=T();return o(B,{ref:t,__css:c.closeButton,className:i,onClick:z(e,d=>{d.stopPropagation(),l()}),...r})});k.displayName="ModalCloseButton";const[U,Z]=R(),ee={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function te(a,t){var e;if(a)return((e=ee[a])==null?void 0:e[t])??a}function se(a){var p;const{isOpen:t,onClose:e,placement:s="right",children:r,...l}=a,i=j(),c=(p=i.components)==null?void 0:p.Drawer,d=te(s,i.direction);return o(U,{value:{placement:d},children:o(W,{isOpen:t,onClose:e,styleConfig:c,...l,children:r})})}const M={exit:{duration:.15,ease:Y.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},oe={exit:({direction:a,transition:t,transitionEnd:e,delay:s})=>{const{exit:r}=S({direction:a});return{...r,transition:(t==null?void 0:t.exit)??v.exit(M.exit,s),transitionEnd:e==null?void 0:e.exit}},enter:({direction:a,transitionEnd:t,transition:e,delay:s})=>{const{enter:r}=S({direction:a});return{...r,transition:(e==null?void 0:e.enter)??v.enter(M.enter,s),transitionEnd:t==null?void 0:t.enter}}},H=h.forwardRef(function(t,e){const{direction:s="right",style:r,unmountOnExit:l,in:i,className:c,transition:d,transitionEnd:p,delay:n,motionProps:u,animatePresenceProps:m,...f}=t,y=S({direction:s}),x=Object.assign({position:"fixed"},y.position,r),w=l?i&&l:!0,A=i||l?"enter":"exit",C={transitionEnd:p,transition:d,direction:s,delay:n};return o(F,{...m,custom:C,children:w&&o(L.div,{...f,ref:e,initial:"exit",className:D("chakra-slide",c),animate:A,exit:"exit",custom:C,variants:oe,style:x,...u})})});H.displayName="Slide";const ae=_(H),I=P((a,t)=>{const{className:e,children:s,motionProps:r,containerProps:l,...i}=a,{getDialogProps:c,getDialogContainerProps:d,isOpen:p}=O(),n=c(i,t),u=d(l),m=D("chakra-modal__content",e),f=T(),y={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...f.dialog},x={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...f.dialogContainer},{placement:w}=Z();return o(V,{children:o(_.div,{...u,className:"chakra-modal__content-container",__css:x,children:o(ae,{motionProps:r,direction:w,in:p,className:m,...n,__css:y,children:s})})})});I.displayName="DrawerContent";const ne=async(a="",t=[])=>{try{const e=t.map(l=>({...l,message:void 0}));return await(await fetch("https://darwin-assistant.vercel.app/api/v1/conversation/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:e,message:a})})).json()}catch{return{status:"failed",response:"OopsðŸ˜Ÿ! Darwin is currently busy, please try again later."}}};function ie({isOpen:a,onClose:t,btnRef:e}){const[s,r]=h.useState(""),[l,i]=h.useState([]),[c,d]=h.useState(!1);h.useEffect(()=>{i([{role:"user",parts:[{text:""}],message:""},{role:"model",parts:[{text:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}],message:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}]),r("")},[]);const p=async()=>{if(!s.trim()||c)return;d(!0),i(u=>[...u,{role:"user",parts:[{text:s}],message:s},{role:"model",parts:[{text:"Thinking..."}],message:"Typing..."}]),r("");const n=await ne(s,l);i(u=>{const m=[...u];return m[m.length-1]={role:"model",parts:[{text:n.response}],message:n.response},m}),d(!1)};return g(se,{blockScrollOnMount:!1,size:"lg",isOpen:a,placement:"right",onClose:t,finalFocusRef:e,children:[o(q,{}),g(I,{children:[o(k,{}),o(E,{children:o(G,{color:"#ff79c6",size:"md",children:"Conversation With Darwin"})}),o(J,{children:l.map((n,u)=>n.message?o(b,{direction:"column",align:n.role==="model"?"flex-start":"flex-end",children:g(K,{mb:4,p:3,borderRadius:"md",bg:n.role==="model"?"#2D3748":"#4A5568",color:"white",width:"85%",transition:"all 0.2s ease-in-out",_hover:{bg:n.role==="model"?"#394150":"#5A6478",transform:"scale(1.02)",boxShadow:"md"},children:[o(N,{fontWeight:"bold",color:"#ff79c6",children:n.role==="model"?"Darwin":"You"}),o(N,{mt:1,children:n.message})]})},u):null)}),g(X,{children:[o(b,{width:"100%",children:o($,{value:s,onKeyDown:n=>{n.key==="Enter"&&!c&&p()},onChange:n=>r(n.target.value),borderLeftRadius:"2xl",borderRightRadius:0,borderWidth:3,borderColor:"#536189",focusBorderColor:"#ff79c6",my:2,placeholder:"Send a message...",isDisabled:c})}),o(Q,{borderLeftRadius:0,colorScheme:"purple",my:2,onClick:p,isDisabled:c,isLoading:c,loadingText:"Sending...",children:"Send"})]})]})]})}export{ie as default};
