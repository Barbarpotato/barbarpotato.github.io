import{e as P,h as C,q as M,o as B,f as F,j as l,d as w,r as m,E as V,g as J,l as v,z as H}from"./index-22ad7a31.js";import{m as _,d as y,a as S,c as k,u as K,b as O,D as G,M as Q,e as U,f as X,H as Z,g as ee,B as se,T as N,h as te}from"./Main-da6fd0ea.js";const[oe,ae]=P({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[re,q]=P({strict:!1,name:"FormControlContext"});function ne(n){const{id:e,isRequired:a,isInvalid:s,isDisabled:t,isReadOnly:o,...d}=n,c=m.useId(),i=e||`field-${c}`,f=`${i}-label`,r=`${i}-feedback`,h=`${i}-helptext`,[b,g]=m.useState(!1),[z,R]=m.useState(!1),[x,T]=m.useState(!1),E=m.useCallback((u={},p=null)=>({id:h,...u,ref:_(p,I=>{I&&R(!0)})}),[h]),L=m.useCallback((u={},p=null)=>({...u,ref:p,"data-focus":y(x),"data-disabled":y(t),"data-invalid":y(s),"data-readonly":y(o),id:u.id!==void 0?u.id:f,htmlFor:u.htmlFor!==void 0?u.htmlFor:i}),[i,t,x,s,o,f]),$=m.useCallback((u={},p=null)=>({id:r,...u,ref:_(p,I=>{I&&g(!0)}),"aria-live":"polite"}),[r]),W=m.useCallback((u={},p=null)=>({...u,...d,ref:p,role:"group","data-focus":y(x),"data-disabled":y(t),"data-invalid":y(s),"data-readonly":y(o)}),[d,t,x,s,o]),Y=m.useCallback((u={},p=null)=>({...u,ref:p,role:"presentation","aria-hidden":!0,children:u.children||"*"}),[]);return{isRequired:!!a,isInvalid:!!s,isReadOnly:!!o,isDisabled:!!t,isFocused:!!x,onFocus:()=>T(!0),onBlur:()=>T(!1),hasFeedbackText:b,setHasFeedbackText:g,hasHelpText:z,setHasHelpText:R,id:i,labelId:f,feedbackId:r,helpTextId:h,htmlProps:d,getHelpTextProps:E,getErrorMessageProps:$,getRootProps:W,getLabelProps:L,getRequiredIndicatorProps:Y}}const le=C(function(e,a){const s=M("Form",e),t=B(e),{getRootProps:o,htmlProps:d,...c}=ne(t),i=F("chakra-form-control",e.className);return l(re,{value:c,children:l(oe,{value:s,children:l(w.div,{...o({},a),className:i,__css:s.container})})})});le.displayName="FormControl";const ie=C(function(e,a){const s=q(),t=ae(),o=F("chakra-form__helper-text",e.className);return l(w.div,{...s==null?void 0:s.getHelpTextProps(e,a),__css:t.helperText,className:o})});ie.displayName="FormHelperText";function de(n){const{isDisabled:e,isInvalid:a,isReadOnly:s,isRequired:t,...o}=ce(n);return{...o,disabled:e,readOnly:s,required:t,"aria-invalid":S(a),"aria-required":S(t),"aria-readonly":S(s)}}function ce(n){const e=q(),{id:a,disabled:s,readOnly:t,required:o,isRequired:d,isInvalid:c,isReadOnly:i,isDisabled:f,onFocus:r,onBlur:h,...b}=n,g=n["aria-describedby"]?[n["aria-describedby"]]:[];return e!=null&&e.hasFeedbackText&&(e!=null&&e.isInvalid)&&g.push(e.feedbackId),e!=null&&e.hasHelpText&&g.push(e.helpTextId),{...b,"aria-describedby":g.join(" ")||void 0,id:a??(e==null?void 0:e.id),isDisabled:s??f??(e==null?void 0:e.isDisabled),isReadOnly:t??i??(e==null?void 0:e.isReadOnly),isRequired:o??d??(e==null?void 0:e.isRequired),isInvalid:c??(e==null?void 0:e.isInvalid),onFocus:k(e==null?void 0:e.onFocus,r),onBlur:k(e==null?void 0:e.onBlur,h)}}const D=C(function(e,a){const{htmlSize:s,...t}=e,o=M("Input",t),d=B(t),c=de(d),i=F("chakra-input",e.className);return l(w.input,{size:s,...c,__css:o.field,ref:a,className:i})});D.displayName="Input";D.id="Input";const j=C((n,e)=>{const{onClick:a,className:s,...t}=n,{onClose:o}=K(),d=F("chakra-modal__close-btn",s),c=O();return l(V,{ref:e,__css:c.closeButton,className:d,onClick:k(a,i=>{i.stopPropagation(),o()}),...t})});j.displayName="ModalCloseButton";const A=C((n,e)=>{const{className:a,...s}=n,t=F("chakra-modal__footer",a),o=O(),d=J({display:"flex",alignItems:"center",justifyContent:"flex-end",...o.footer});return l(w.footer,{ref:e,...s,__css:d,className:t})});A.displayName="ModalFooter";const ue=async(n="",e=[])=>{try{const a=e.map(o=>({...o,message:void 0}));return await(await fetch("https://darwin-assistant.vercel.app/api/v1/conversation/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:a,message:n})})).json()}catch{return{status:"failed",response:"OopsðŸ˜Ÿ! Darwin is currently busy, please try again later."}}};function pe({isOpen:n,onClose:e,btnRef:a}){const[s,t]=m.useState(""),[o,d]=m.useState([]),[c,i]=m.useState(!1);m.useEffect(()=>{d([{role:"user",parts:[{text:""}],message:""},{role:"model",parts:[{text:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}],message:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}]),t("")},[]);const f=async()=>{if(!s.trim()||c)return;i(!0),d(h=>[...h,{role:"user",parts:[{text:s}],message:s},{role:"model",parts:[{text:"Thinking..."}],message:"Typing..."}]),t("");const r=await ue(s,o);d(h=>{const b=[...h];return b[b.length-1]={role:"model",parts:[{text:r.response}],message:r.response},b}),i(!1)};return v(G,{blockScrollOnMount:!1,size:"lg",isOpen:n,placement:"right",onClose:e,finalFocusRef:a,children:[l(Q,{}),v(U,{children:[l(j,{}),l(X,{children:l(Z,{color:"#ff79c6",size:"md",children:"Conversation With Darwin"})}),l(ee,{children:o.map((r,h)=>r.message?l(H,{direction:"column",align:r.role==="model"?"flex-start":"flex-end",children:v(se,{mb:4,p:3,borderRadius:"md",bg:r.role==="model"?"#2D3748":"#4A5568",color:"white",width:"85%",transition:"all 0.2s ease-in-out",_hover:{bg:r.role==="model"?"#394150":"#5A6478",transform:"scale(1.02)",boxShadow:"md"},children:[l(N,{fontWeight:"bold",color:"#ff79c6",children:r.role==="model"?"Darwin":"You"}),l(N,{mt:1,children:r.message})]})},h):null)}),v(A,{children:[l(H,{width:"100%",children:l(D,{value:s,onKeyDown:r=>{r.key==="Enter"&&!c&&f()},onChange:r=>t(r.target.value),borderLeftRadius:"2xl",borderRightRadius:0,borderWidth:3,borderColor:"#536189",focusBorderColor:"#ff79c6",my:2,placeholder:"Send a message...",isDisabled:c})}),l(te,{borderLeftRadius:0,colorScheme:"purple",my:2,onClick:f,isDisabled:c,isLoading:c,loadingText:"Sending...",children:"Send"})]})]})]})}export{pe as default};
